<template name="viewBet">
  {{formatted_owners_bet}}
  {{#if isFinished}}
    {{{resultOfBet}}}
  {{/if}}
  {{#each bet}}
    <div class="bet-header">
      The Bet: {{the_bet}}<br>
      The Stake: {{product.product}}<br>
      {{days_left this}} days left to go.
    </div>
    <h2>Friends</h2>
    <div class="bet-friends-container">
      <div class="bet-onBoard-list">
        <div class="bet-onBoard-list-head">
          On Board:
        </div>
        {{#each accepted this._id}}
          {{getName invitee}}<br>
        {{/each}}
      </div>
      <div class="bet-invited-list">
        <div class="bet-invited-list-head">
          Invited:
        </div>
        <ul>
        {{#each friends}}
          <li>
            {{#if needToInvite this.id}}
              <button data-fbid="{{this.id}}" class="inviteToBetchyu">{{this.name}}</button>
            {{else}}
              {{this.name}}
            {{/if}}
          </li>
        {{/each}}
        </ul>
      </div>
    </div>
    <h2 class="dash-update-hook">Update</h2>
    <div class="block dash-update-hook">
      {{#if need_personal_info}}
        {{> needPersonalInfo}}
        <p class="disclaimer">We'll keep this private, don't worry.</p>
      {{else}}
        {{#if need_bet_update}}
          {{#with bet_to_update}}
          <div data-_id="{{this._id}}" class="block-content">
            <div class="dash-goal-title">
              <div class="dash-goal-title-title">
                {{bet_name this}}
              </div>
              <div class="p11px">
                <span class="dash-goal-title-label">Goal</span>
              </div>
            </div>
            <span class='dash-goal-days-left' title="days left">{{days_left this}}</span>
            <div class="dash-goal-update">
              {{{bet_progress this}}}
            </div>
            <button id="updateBetInfo">Save</button>
          </div>
          {{/with}}
        {{/if}}
      {{/if}}

      {{#if need_nothing}}
        <div class="dash-info-good">We don't need anything right now!</div>
      {{/if}}
    </div>
    {{#unless isAccepted}}
      <button id="acceptBet">Accept the Bet</button>
      <button class="inverse-button" id="declineBet">Decline the Bet</button>
    {{else}}
      {{#unless isFinished}}
        {{#if isOwner}}
          <div>
            <button id="addPeopleToBet">Invite more Friends</button>
          </div>
        {{/if}}
        <div>
          <button id="winBet">Win the Bet</button>
          <button class="inverse-button" id="loseBet">Lose the Bet</button>
        </div>
      {{/unless}}
    {{/unless}}
  {{/each}}
</template>
